HEADER hducommbmain,Source Code Ver : 1.6 ,TestScript Ver :1.4 
--------------------------------------------------------------------------------
-- Author Name         : Anusha V
--
-- File Name           : hducommbmain.ptu
--                       
-- Test Creation Date  : 30.10.2017
--
-- Tested Functions    : MainFunc
--                       LaunchApplication
--                       SdCardInserted               
--
-- Version History     :
--
--  TEST-VERSION     TEST-DATE	    TESTER NAME        MODIFICATIONS
--  ------------   	---------       -----------        -------------
--   	1.1         30.10.2017      Anusha V    	   Created the PTU file.
--      1.2 		10.11.2017		Anusha V		   Updated as per #PR100171
--      1.3 		14.11.2017		Anusha V		   Updated as per #PR100171
--		1.4			18.08.2020		Harshitha R 	   Updated as per #PR100267
--------------------------------------------------------------------------------
--
-- TESTED FILE INCLUDE DIRECTIVES 
--
--------------------------------------------------------------------------------

#/*============================================================================*/
#/* Module specific includes                                                   */
#/*============================================================================*/

##include "hducommbarinc825.h"     
##include "hdulibbasicfunc.h"      
##include "hdulibstm32f4xxgpio.h"  
##include "hducommfmemmap.h"       
##include "hdulibstm32f4xxrcc.h"   
##include "hducommbhw.h"           
##include "hdulibstm32f4xxcrc.h"  
##include "hdulibcorecmfunc.h" 
##include "hducommbrevno.h"    
##include "hdulibstm32f4xx.h"  
##include "hducommfwdog.h"   

--Macros defined for the purpose of testing

##define SD_PRESENT               ((T_UINT8)0x01)
##define SD_NOT_PRESENT           ((T_UINT8)0x00)
##define HOWELL_DAU_FID          42U

##define  CHAR0 '0'
##define  CHAR9 '9'
##define  CHARUA 'A'
##define  CHARUZ 'Z'
##define  CHARLA 'a'
##define  CHARLZ 'z'
##define  POINT '.'
##define  HYPHEN '-'
##define  SPACE ' '
##define DLY_500MS   10U
##define PBIT_ERROR  172
##define NO_ERR_VAL     0U
##define DELAY_VAL 0xFFFF

--------------------------------------------------------------------------------
--
-- TESTED FILE DECLARATIONS 
--
--------------------------------------------------------------------------------

-- Declarations of the global variables of the tested file

	#T_UINT8 Revno_id_boot[16];

	#T_BOOL Maint_jump;
	
	#T_BOOL Swl_jump;

-- Declarations of the temporary variables of the tested file
	
	--Temporary structure created to initialize the settings to enable  GPIO clock
	#T_GPIO_TYPE_INIT  PTU_gpio_init_structure;

	--Function declared to be used in LaumchApplication
	#void dummyfunc(void);

	--Temporary structure created to Set the parameters  of A825 message 
	#T_A825_MESSAGE PTU_s_tx_message;
	
	#void PTU_func1(void);	

	#T_UINT32 *PTU_Set_MSP=(T_UINT32 *)&PTU_func1;
 
--------------------------------------------------------------------------------

BEGIN
    COMMENT  Author Name         : Anusha V
	COMMENT 
	COMMENT  File Name           : hducommbmain.ptu
	COMMENT 
	COMMENT  Tested Functions    : MainFunc
    COMMENT                        LaunchApplication
    COMMENT                        SdCardInserted 
    COMMENT                        
	COMMENT  Assumptions and Constraints
	COMMENT  <AC>
	COMMENT
	COMMENT  Assumption(s):
	COMMENT  None
	COMMENT 
	COMMENT  Constraint(s):
	COMMENT  1.Header file "hducommfmemmap.h" is modified for testing purpose. 
	COMMENT  a)The macro 'MEMMAP_MAINT_APP_ADDR' is modified for stubbing hardware address.
    COMMENT  /*Commented for testing purpose*/
	COMMENT  /*#define MEMMAP_MAINT_APP_ADDR        ( MEMMAP_MAINT_APP_START)*/
	COMMENT	 /* Modified macro by stubbing hardware address for testing purpose*/
	COMMENT	 T_UINT32        *PTU_MEMMAP_MAINT_APP_ADDR[2];
	COMMENT  #define MEMMAP_MAINT_APP_ADDR       ((T_UINT32)&PTU_MEMMAP_MAINT_APP_ADDR[0])
    COMMENT    
    COMMENT  b)The macro 'MEMMAP_BOOT_CRC_ADDR' is modified for stubbing hardware address.
    COMMENT  /*Commented for testing purpose*/
	COMMENT  /*#define MEMMAP_BOOT_CRC_ADDR    	( MEMMAP_BOOT_START \
    COMMENT    			      			              + MEMMAP_BOOT_SIZE \
    COMMENT                				   	          - MEMMAP_CRC_LEN)*/
 	COMMENT	 /* Modified macro by stubbing hardware address for testing purpose*/
 	COMMENT	 T_UINT32 PTU_MEMMAP_BOOT_CRC_ADDR;
	COMMENT	 #define MEMMAP_BOOT_CRC_ADDR  &PTU_MEMMAP_BOOT_CRC_ADDR
    COMMENT      
    COMMENT  c)The macro'MEMMAP_BOOT_ADDR' is modified for stubbing hardware address.
	COMMENT  /*Commented for testing purpose*/
    COMMENT  /*#define MEMMAP_BOOT_ADDR             ( MEMMAP_BOOT_START)*/
    COMMENT  /* Modified macro by stubbing hardware address for testing purpose*/
    COMMENT  T_UINT32   PTU_MEMMAP_BOOT_ADDR[2] ;
    COMMENT  #define MEMMAP_BOOT_ADDR      &PTU_MEMMAP_BOOT_ADDR[0]
    COMMENT     
    COMMENT  d)The macro 'MEMMAP_MAINT_APP_CRC_ADDR' is modified for stubbing hardware address.
	COMMENT  /*Commented for testing purpose*/
    COMMENT  /*#define MEMMAP_MAINT_APP_CRC_ADDR    ( MEMMAP_MAINT_APP_START \
    COMMENT                                            + MEMMAP_MAINT_APP_SIZE \
    COMMENT                                            - MEMMAP_CRC_LEN)*/
    COMMENT  /* Modified macro by stubbing hardware address for testing purpose*/
    COMMENT  T_UINT32    PTU_MEMMAP_MAINT_APP_CRC_ADDR;
    COMMENT  #define MEMMAP_MAINT_APP_CRC_ADDR    &PTU_MEMMAP_MAINT_APP_CRC_ADDR
	COMMENT 
	COMMENT  e)The macro 'MEMMAP_PRI_APP_ADDR' is modified for stubbing hardware address.
	COMMENT  /*Commented for testing purpose*/
    COMMENT  /*#define MEMMAP_PRI_APP_ADDR        	( MEMMAP_PRI_APP_START)*/
    COMMENT  /* Modified macro by stubbing hardware address for testing purpose*/
    COMMENT  T_UINT32    *PTU_MEMMAP_PRI_APP_ADDR[2];
    COMMENT  #define MEMMAP_PRI_APP_ADDR  ((T_UINT32)&PTU_MEMMAP_PRI_APP_ADDR[0])
    COMMENT    
    COMMENT  f)The macro 'MEMMAP_PRI_APP_CRC_ADDR' is modified for stubbing hardware address.
    COMMENT  /*Commented for testing purpose*/
    COMMENT  /*#define MEMMAP_PRI_APP_CRC_ADDR    	( MEMMAP_PRI_APP_START 
    COMMENT                                              + MEMMAP_PRI_APP_SIZE \
    COMMENT                                              - MEMMAP_CRC_LEN)*/
    COMMENT g) /* Modified macro by stubbing hardware address for testing purpose*/
    COMMENT  T_UINT32   PTU_MEMMAP_PRI_APP_CRC_ADDR[2] ;
    COMMENT  #define MEMMAP_PRI_APP_CRC_ADDR        &PTU_MEMMAP_PRI_APP_CRC_ADDR[0]
	COMMENT   
	COMMENT h)/*Modified for testing purpose*/
	COMMENT /*#define MEMMAP_SWL_APP_ADDR        ( MEMMAP_MAINT_SWL_START)*/
	COMMENT T_UINT32 PTU_MEMMAP_SWL_APP_ADDR[2];
	COMMENT #define MEMMAP_SWL_APP_ADDR		((T_UINT32)&PTU_MEMMAP_SWL_APP_ADDR[0])
	COMMENT
	COMMENT	 2.The 'for' loop can not be covered for 0 and 1 times as it is controlled  by
	COMMENT  macros DEC_ZERO,DELAY_VAL and REVNO_LEN_BOOT.in the function 'MainFunc'.
	COMMENT
	COMMENT 
	COMMENT 3.The below mentioned while loop in function "MainFunc" can not 
	COMMENT be covered for  1 time as the variable counter is initially set to 
	COMMENT DLY_500MS * DEC_FOUR and in each loop counter gets decremented by ONE and the same can not 
	COMMENT be covered for 0 time as there is no control on variable.counter
	COMMENT 
	COMMENT  Code snippet:
	COMMENT while(((FALSE == Maint_jump) || (FALSE == Swl_jump))&& (counter>DEC_ZERO))
	COMMENT {
	COMMENT 	counter = counter-DEC_ONE; /* Do nothing */
	COMMENT } 
	COMMENT hence equivalence class 33 can not be verified.
	COMMENT
	COMMENT 4.Source file "hducommbmain.c" is modified for testing purpose in hducommbmain.ptu
    COMMENT  The while(TRUE)
    COMMENT 
    COMMENT  Snippet of code is added in function 'MainFunc':
    COMMENT 
    COMMENT  /*local variable declared for testing purpose*/
    COMMENT    T_UINT16 PTU_count=0,PTU_count1=0,PTU_count2=0,PTU_count3 =0;
    COMMENT  while(TRUE)
    COMMENT  {
    COMMENT   /*Modified for testing purpose to terminate infinite loop*/
	COMMENT	  PTU_count++;
	COMMENT				 
	COMMENT	 	if(PTU_count == 4)
	COMMENT  	{
	COMMENT		break;
	COMMENT	 	}
	COMMENT	 	else
	COMMENT	 	{
	COMMENT		/*nothing*/
	COMMENT  	}
	COMMENT	similar modifications is done in LLR hducommbmain-MainFunc-CB-LLR-022,hducommbmain-MainFunc-CB-LLR-024,
	COMMENT hducommbmain-MainFunc-CB-LLR-025 to terminate the infinite loop hence loop can not be covered for 0 and 1 times.	   
    COMMENT   }
    COMMENT  5.Source file "hducommbmain.c" is modified for testing purpose in hducommbmain.ptu
    COMMENT  The macro value of 'DLY_500MS' is changed to 10U to reduced the delay.      
	COMMENT	</AC>
    
    COMMENT  Equivalence Class Description
	COMMENT  <ECD>
	COMMENT 
	COMMENT  Valid Class(es)
	COMMENT  Class 1
	COMMENT  In Function "MainFunc",'HwInit' is called .
	COMMENT                      
	COMMENT  Class 2
	COMMENT  In Function "MainFunc",'CrcResetDr'is called .
	COMMENT
	COMMENT  Class 3
	COMMENT  In Function "MainFunc",'CrcCalcBlockCrc'is called.
	COMMENT
	COMMENT  Class 4
	COMMENT  In Function "MainFunc",computed CRC and CRC for BOOT application are equal . 
	COMMENT
	COMMENT  Class 6
	COMMENT  In the Function "SdCardInserted",'RccAhb1PeriphClockCmd' is called .
	COMMENT
	COMMENT  Class 7
	COMMENT  In the Function "SdCardInserted",'GpioInit' is called .
	COMMENT 
	COMMENT  Class 8
	COMMENT  In the Function "SdCardInserted",'GpioReadInputDataBit' is called and return value of 
	COMMENT  GpioReadInputDataBit is BIT_SET
	COMMENT 
	COMMENT	 Class 9
	COMMENT  In the Function "SdCardInserted",'GpioReadInputDataBit' is called and return value of 
	COMMENT  GpioReadInputDataBit is not equal to BIT_SET
	COMMENT  
	COMMENT  Class 10
	COMMENT  In Function "MainFunc",'A825Init' is called .
	COMMENT
	COMMENT  Class 14
	COMMENT  In the Function "MainFunc",computed CRC and CRC for Maintenance Application Software 
	COMMENT  is equal.
	COMMENT
	COMMENT  Class 15
	COMMENT  In the Function "MainFunc", 'LaunchApplication'is called.
	COMMENT
	COMMENT	 Class 16
	COMMENT	 In the Function "MainFunc",computed  CRC and CRC for Maintenance Application Software 
	COMMENT  is not equal.
	COMMENT
	COMMENT  Class 17
	COMMENT  In the Function "LaunchApplication",'SetMsp'is called.
	COMMENT  
	COMMENT  Class 19
	COMMENT  In the Function "MainFunc",computed CRC and CRC for Primary Application Software is 
	COMMENT  equal.
	COMMENT
	COMMENT	 Class 20
	COMMENT	 In the Function "MainFunc",computed CRC and CRC for Primary Application Software is
	COMMENT  not equal. 
	COMMENT
	COMMENT  Class 21
	COMMENT  In Function "MainFunc",computed  CRC and CRC for BOOT application is not equal.
	COMMENT
	COMMENT  Class 22
	COMMENT  In Function "MainFunc",Revno_id_boot is Alphanumeric.
	COMMENT
	COMMENT  Class 23
	COMMENT  In Function "MainFunc",Revno_id_boot is HYPHEN. 
	COMMENT
	COMMENT  Class 24
	COMMENT  In Function "MainFunc",Revno_id_boot is POINT.
	COMMENT
	COMMENT  Class 25
	COMMENT  In Function "MainFunc",Revno_id_boot is SPACE.
	COMMENT
	COMMENT  Class 26
	COMMENT  In Function "MainFunc",Revno_id_boot is 'H108E-136 -1.06'.
	COMMENT 
	COMMENT  Class 27
	COMMENT  In Function "MainFunc", 'SdCardInserted' is called and return value of SdCardInserted is 
	COMMENT  equal to SD_PRESENT
	COMMENT 
	COMMENT  Class 28
	COMMENT  In Function "MainFunc", 'SdCardInserted' is called and return value of SdCardInserted is
	COMMENT  not equal to SD_PRESENT
	COMMENT 
	COMMENT  Class 29
	COMMENT  In Function "MainFunc",Maint_jump is FALSE.
	COMMENT
	COMMENT  Class 30
	COMMENT  In Function "MainFunc",Maint_jump is TRUE.
	COMMENT
	COMMENT  Class 31
	COMMENT  In Function "MainFunc",counter is greater than DEC_ZERO.
	COMMENT
	COMMENT  Class 32
	COMMENT  In Function "MainFunc",counter is equal DEC_ZERO.
	COMMENT
	COMMENT  Class 33
	COMMENT  In Function "MainFunc",counter is less than DEC_ZERO.
	COMMENT
	COMMENT  Class 34
	COMMENT  In the Function "MainFunc",'CanDeInit' is called
	COMMENT
	COMMENT  Class 35
	COMMENT  In the Function "MainFunc",'A825Xmit' is called.
	COMMENT
	COMMENT  Class 36
	COMMENT  In the Function "MainFunc",'WdogKickWatchDog' is called
	COMMENT
	COMMENT Class 37
	COMMENT In function "MainFunc",Swl_jump is set to TRUE
	COMMENT
	COMMENT Class 38
	COMMENT In function "MainFunc",Swl_jump is set to FALSE
	COMMENT  Invalid Class(es)
	COMMENT  None
	COMMENT  </ECD>

--------------------------------------------------------------------------------
--
-- STUB DECLARATIONS OF THE TESTED OR INTEGRATED UNITS
--
--------------------------------------------------------------------------------

SIMUL

	DEFINE STUB hducommbmain_c

		#void WdogKickWatchDog(void); 
		
		-- Parameter ps_xm is made as _no since the address of function is passed
		#T_A825_XMIT_RESULT A825Xmit(T_A825_MESSAGE _no *ps_xm)
		#{
		# PTU_s_tx_message = *ps_xm;
		# }
		
		#void CanDeInit(T_CAN_TYPE  _in *can_x); 		
		
		#T_UINT32 CrcCalcBlockCrc(T_UINT32  _in *pbuffer, T_UINT32  _in buffer_length); 
		
		#void CrcResetDr(void); 		
		
		#void A825Init(void); 
		
		#void HwInit(void); 
	
		#T_UINT8 GpioReadInputDataBit(T_GPIO_TYPE  _in *gpio_x, T_UINT16  _in gpio_pin); 	
		
		-- Parameter gpio_init_struct is made as _no since the address of function is passed
		#void GpioInit(T_GPIO_TYPE* _in gpio_x, T_GPIO_TYPE_INIT  _no *gpio_init_struct)	
		#{
		# PTU_gpio_init_structure = *gpio_init_struct;
		#}
		
		#void RccAhb1PeriphClockCmd(T_UINT32 _in rcc_ahb1_periph, T_FUNCTIONAL_STATE _in new_state);

		#void PTU_func1(void) 
		#{
		# ;
		#}
		
		--dummy function for the address of funtion pointer in launch app
		#void dummyfunc(void) 
		#{
		# ;
		#}

	END DEFINE
	
ELSE_SIMUL

	--No action defined as of now if the module is not simulated

END SIMUL

--------------------------------------------------------------------------------
--
-- ENVIRONMENTS DECLARATIONS
--
--------------------------------------------------------------------------------

--IF HOST

	--No special things that have to be done on the host to run the test.

--ELSE

	--No action defined for the target execution as of now

--END IF

--------------------------------------------------------------------------------
-- TESTED FILE ENVIRONMENT
--------------------------------------------------------------------------------
-- Environment of the file hducommbmain.c

ENVIRONMENT ENV_hducommbmain_c

	 ARRAY PTU_MEMMAP_BOOT_ADDR,		init = {0 =>(T_UINT32)&PTU_Set_MSP , 1=>(T_UINT32)&dummyfunc},		ev = init
	 
	 ARRAY PTU_MEMMAP_PRI_APP_ADDR,		init = {0 =>(T_UINT32)&PTU_Set_MSP , 1=>(T_UINT32)&dummyfunc},		ev = init

	 ARRAY PTU_MEMMAP_MAINT_APP_ADDR,   init = {0 =>(T_UINT32)&PTU_Set_MSP , 1=>(T_UINT32)&dummyfunc},		ev = init
	 
	 ARRAY PTU_MEMMAP_SWL_APP_ADDR,		init = {0 =>(T_UINT32)&PTU_Set_MSP , 1=>(T_UINT32)&dummyfunc},		ev = init

END ENVIRONMENT -- ENV_hducommbmain_c

USE ENV_hducommbmain_c
--------------------------------------------------------------------------------
--
-- SERVICES DECLARATIONS
--
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
-- Declaration of the service MainFunc
--------------------------------------------------------------------------------
SERVICE MainFunc
SERVICE_TYPE extern

-- By function returned type declaration
#T_SINT32 ret_MainFunc;

TEST 1
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-001]
	COMMENT  The function 'MainFunc' initializes Hardware by calling 'HwInit' function and
	COMMENT  initializes the A825 Communication by calling 'A825Init'.
	COMMENT  Equivalence Class 1,10
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-002]
	COMMENT  The function 'MainFunc'resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr'and computes the 32-bit CRC for Boot Software by calling the function
	COMMENT  'CrcCalcBlockCrc'with parameters MEMMAP_BOOT_ADDR and MEMMAP_BOOT_CRC_CNT.
	COMMENT  Equivalence Class 2,3
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-003]
	COMMENT  The function 'MainFunc'sets CRC for Boot Application with actual CRC 
	COMMENT  ‘MEMMAP_BOOT_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-004]
	COMMENT  This function 'MainFunc' resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr'and computes the 32-bit CRC for Primary Application Software by calling 
	COMMENT  the function 'CrcCalcBlockCrc' with parameters MEMMAP_PRI_APP_ADDR and MEMMAP_PRI_APP_CRC_CNT.
	COMMENT  Equivalence Class 2,3
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-018]
	COMMENT  The function 'MainFunc' sets CRC for Primary Application with actual CRC 
	COMMENT  ‘MEMMAP_PRI_APP_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-019]
	COMMENT  The function 'MainFunc' Resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr 'and computes
	COMMENT  the 32-bit CRC for Maintenance Application Software by calling the function 
	COMMENT  CrcCalcBlockCrc with parameters
	COMMENT  MEMMAP_MAINT_APP_ADDR and MEMMAP_MAINT_APP_CRC_CNT
	COMMENT  Equivalence Class 2,3
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-020]
	COMMENT  The function 'MainFunc'sets CRC for Maintenance Application with actual CRC 
	COMMENT  ‘MEMMAP_MAINT_APP_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-021]
	COMMENT  The function 'MainFunc' does the following 
	COMMENT  1.	Does nothing when Actual and calculated CRC for Boot software are equal.
	COMMENT  2.	Does nothing when Actual and calculated CRC for primary application software are
	COMMENT     equal.
	COMMENT  3.	Does nothing when Actual and calculated CRC for Maintainance application software 
	COMMENT     are equal.
	COMMENT  Equivalence Class 4,14,19
	COMMENT 
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-001]
	COMMENT  This function 'SdCardInserted' enables GPIOA clock by calling 'RccAhb1PeriphClockCmd'
	COMMENT  with parameters RCC_AHB1PERIPH_GPIOA and ENABLE.
	COMMENT  Equivalence Class 6
	COMMENT
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-002]
	COMMENT  The function 'SdCardInserted' configures pin 15 of GPIO port A by calling 'GpioInit'
	COMMENT  and initialize the members
	COMMENT  of gpio init structure  with the members  initialized as follows  
	COMMENT  a) set GPIO pin(GPIO_Pin) to HW_GPIOA_SDCARD,
	COMMENT  b) set GPIO port Mode register(GPIO_Mode) to GPIO_MODE_IN, 
	COMMENT  c) set GPIO port Pull-up/Pull-down register(GPIO_PuPd) to GPIO_PUPD_UP and
	COMMENT  d) set GPIO speed(GPIO_Speed) to GPIO_SPEED_100MHZ.
	COMMENT  Equivalence Class 7
	COMMENT
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-003]
	COMMENT  The function 'SdCardInserted' does nothing when the function 'GpioReadInputDataBit' 
	COMMENT  with parameters 
	COMMENT  GPIOA and GPIO_PIN_15 return other than BIT_SET'
	COMMENT  Equivalence Class 9
	COMMENT  
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-004]
	COMMENT  The function 'SdCardInserted' returns the status of the SD card.
	COMMENT  Equivalence Class 27
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-017]
	COMMENT  The function does the following:
	COMMENT  a)  set the loop counter to product of DLY_500MS and DEC_FOUR
	COMMENT  b) loops for 0 time when Maint_jump is TRUE .
	COMMENT  when 
	COMMENT  a) Actual and calculated CRC for Boot software are equal
	COMMENT  b) Sd card is present in slot
	COMMENT  MCDC Covered FX
	COMMENT  Equivalence Class 4,27,30
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-008]
	COMMENT  The function 'MainFunc'does the following 
	COMMENT  1)	Calls 'CanDeInit' to Deinitializes the CAN peripheral registers to their default reset valueswith parameter CAN1
	COMMENT	 2)	launch Maintenance Application by calling 'LaunchApplication' with parameter
	COMMENT  MEMMAP_MAINT_APP_ADDR
	COMMENT	 when
	COMMENT	 a)	Actual and calculated CRC for Boot software are equal.
	COMMENT	 b)	Sd card is present in slot.
	COMMENT	 c)	Maint_jump is TRUE
	COMMENT	 d)	Actual and calculated CRC for Maintenance Application software are equal.
	COMMENT  Equivalence Class 4,14,15,27,30
	COMMENT  
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-001]
	COMMENT  The function 'LaunchApplication' jumps to Secondary Application from passed 
	COMMENT  jump_address value
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-002]
	COMMENT  The function 'LaunchApplication' stores jump_address value in main stack pointer by
	COMMENT  calling 'SetMsp' 
	COMMENT  with parameter jump_address and jumps to the Application.
	COMMENT  Equivalence Class 17
	COMMENT
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-003]
	COMMENT  The function 'LaunchApplication' returns DEC_ZERO.
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-015]
	COMMENT  The function 'MainFunc'  returns DEC_ZERO
	COMMENT  Equivalence Class None
	COMMENT   </TD>

	ELEMENT

		COMMENT INPUT SECTION:

			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *( MEMMAP_BOOT_CRC_ADDR),				init=0,						ev=init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR*(MEMMAP_MAINT_APP_CRC_ADDR),			init=0,						ev=init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *(MEMMAP_PRI_APP_CRC_ADDR), 			init=0,     				ev=init
			
			--Reset CRC Data register MEMMAP_SWL_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_SWL_APP_CRC_ADDR), 			init=0,     				ev=init
																				
			VAR Maint_jump,						init=TRUE,					ev=init
			


		COMMENT INPUT/OUTPUT SECTION:

			--None

		COMMENT OUTPUT SECTION:

			--Return value of MainFunc
			VAR ret_MainFunc,							init =1,					ev = 0

			--Specifies the GPIO pins to be configured
			VAR PTU_gpio_init_structure.GPIO_Pin,		init = 0,					ev = HW_GPIOA_SDCARD

			--Specifies the operating mode for the selected pins	
			VAR PTU_gpio_init_structure.GPIO_Mode,		init = GPIO_MODE_OUT,		ev = GPIO_MODE_IN

			--Specifies the operating Pull-up/Pull down for the selected pins	
			VAR PTU_gpio_init_structure.GPIO_PuPd,		init = GPIO_PUPD_DOWN,		ev = GPIO_PUPD_UP

			--Specifies the speed for the selected pins
			VAR PTU_gpio_init_structure.GPIO_Speed,		init = GPIO_SPEED_2MHZ,		ev = GPIO_SPEED_100MHZ

		-- Stub Calls :
		SIMUL

			--Hardware initialization 
			STUB HwInit()

			-- Resets the CRC Data Register
			STUB CrcResetDr()

			--Computes the 32-bit CRC of a given buffer of data word  
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)0

			--Initializes the gpio peripheral 
			STUB GpioInit(GPIOA)

			--Enables or disables the AHB1 peripheral clock
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)

			--Reads the specified input port pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET

			--Performs initialization for ARINC 825 communication
			STUB A825Init()

			-- Resets the CRC Data Register
			STUB CrcResetDr () 

			-- Resets the CRC Data Register
			STUB CrcResetDr ()

			-- Resets the CRC Data Register
			STUB CrcResetDr ()

			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR, MEMMAP_PRI_APP_CRC_CNT)0

			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0
			
			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_SWL_APP_CRC_CNT)0

			--calls dummy function
			STUB  dummyfunc()

			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)

		END SIMUL

		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();

	END ELEMENT

END TEST -- TEST 1

TEST 2
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-021]
	COMMENT  The Function 'MainFunc'does the following 
	COMMENT  1.	Does nothing when Actual and calculated CRC for Boot software are equal.
	COMMENT  2.	Set  error code to result of  bitwise OR  of error code and DEC_FOUR when Actual 
	COMMENT  and calculated CRC 
	COMMENT  for flight software are not equal.
	COMMENT  3.	Set  error code to result of  bitwise OR  of error code and DEC_TWO when Actual
	COMMENT  and calculated CRC
	COMMENT  for maintenance software are not equal.
	COMMENT  Equivalence Class 4,16,20
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-022]
	COMMENT  The Function 'MainFunc' does the following to transmit Maintenance CRC error message
	COMMENT	 1.Set the parameters of A825 message as follows. 
	COMMENT	 - LCC of A825 message to NOC.
	COMMENT	 - sfid of  BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT	 - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT	 - lcl of  BID of sID of A825 message to DEC_ONE.
	COMMENT  - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT	 - rci of  BID of sID of A825 message to DEC_ZERO
	COMMENT	 - u8PaySize of A825 message to DEC_ONE
	COMMENT	 2.The function loops infinitely and does the following:
	COMMENT  - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - Set u8Payload[0] of  A825 message  to error code.
	COMMENT  - Call the function A825Xmit with A825 message as parameter.
	COMMENT	 - Delays for DLY_500MS
	COMMENT	 - Call the function WdogKickWatchDog
	COMMENT	 when
	COMMENT	 a)	Actual and calculated CRC for Boot software are equal.
	COMMENT	 b)	Sd card is present in slot.
	COMMENT	 c)	Maint_jump is TRUE
	COMMENT	 d)	Actual and calculated CRC for Maintenance Application software are not equal.
	COMMENT  Equivalence Class 14,27,35,36
	COMMENT   </TD> 
        
	ELEMENT
        
		COMMENT INPUT SECTION:
    	
    		--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
    		VAR *( MEMMAP_BOOT_CRC_ADDR), 					init=1,     			ev = init    		
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *(MEMMAP_MAINT_APP_CRC_ADDR), 				init=1,     			ev = init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,							init=TRUE,				ev = init
        	
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *(MEMMAP_PRI_APP_CRC_ADDR), 				init = 1,     			ev = init
			
        COMMENT INPUT/OUTPUT SECTION:
        
			--None
    
		COMMENT OUTPUT SECTION:
    	
    		--Return value of MainFunc
    		VAR ret_MainFunc,								init =1,				ev = 0
							
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,						init = TMC,				ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,				init = 0,				ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,				init = 0,				ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,				init = 0,				ev = DEC_ONE              
			VAR PTU_s_tx_message.sID.BID.pvt,				init = 0,				ev = DEC_ONE                         
			VAR PTU_s_tx_message.sID.BID.rci,				init = 1,				ev = 0               
			VAR PTU_s_tx_message.u8PaySize,					init = 1,				ev = DEC_ONE 
			VAR PTU_s_tx_message.sID.BID.doc,				init = 0,				ev = PBIT_ERROR 
			VAR PTU_s_tx_message.u8PayLoad[0],				init = 0,				ev = 6 
			
    	-- Stub Calls :
    	SIMUL
    	
    		--Initialize hardware
    		STUB HwInit()
    				
    		--Computes the 32-bit CRC of a given buffer of data word  and Resets the CRC Data Register
    		STUB CrcResetDr()
    		
    		-- Get value of l_crc_calc[0]
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
    		
    		--Computes the 32-bit CRC of a given buffer of data word  and Resets the CRC Data Register
    		STUB CrcResetDr()
    		
    		--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)0
    		
    		--Computes the 32-bit CRC of a given buffer of data word  and Resets the CRC Data Register
    		STUB CrcResetDr()
    		
    		--For CRC calculations for Maintenance  Application
			STUB CrcCalcBlockCrc ((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()

    		-- Enable  GPIOA clock 
    		STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
    				
    		--GPIO configuration in input for uSD_Detect signal
    		STUB GpioInit(GPIOA)
    				
    		--Check SD card detect pin
    		STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
    				
    	    --Performs initialization necessary for ARINC 825 communication
    		STUB A825Init()
    	    
    	    --builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			
    		--reloads the watchdog timer 
			STUB WdogKickWatchDog()
    		
    		--builds a CAN message from the user supplied ARINC 825 message
    		STUB  A825Xmit() A825_XM_OVERFLOW
    		
    		--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			
			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW

			--reloads the watchdog timer 
			STUB WdogKickWatchDog()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			    		
			--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			
    	END SIMUL
    	
    	-- Calling the Unit Under Test :
    	#ret_MainFunc = MainFunc();
     END ELEMENT
    
END TEST -- TEST 2

TEST 3
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-023]
	COMMENT  The function 'MainFunc'does the following to transmit Flight CRC error message or no
	COMMENT  error message.
	COMMENT  1.Set the parameters  of A825 message as follows. 
	COMMENT  - lcc of A825 message to NOC.
	COMMENT	 - sfid of BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT	 - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT	 - lcl of  BID of sID of A825 message to DEC_ONE.
	COMMENT	 - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT	 - rci of  BID of  sID to DEC_ZERO.
	COMMENT	 - u8PaySize of A825 message to DEC_ONE.
	COMMENT  - doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - sets u8PayLoad[0] of  A825 message  to NO_ERR_VAL and calls 'A825Xmit' with A825 message
	COMMENT  as parameter when
	COMMENT  Actual and calculated CRC for Maintenance Application software are equal 
	COMMENT  when
	COMMENT  a)	Actual and calculated CRC for Boot software are equal.
	COMMENT  b)	Sd card is present in slot.
	COMMENT  c)	Maint_jump is other than TRUE.
	COMMENT  Equivalence Class 4,14,27,29,35
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-011]
	COMMENT  The function 'MainFunc' does the following
    COMMENT  1) Delay is added by looping for DELAY_VAL time to ensure CRC check status is 
    COMMENT  transmitted before CAN de-init. 
	COMMENT  2)	Calls the function 'CanDeInit' to Deinitializes the CAN peripheral registers to their default reset valueswith parameter
	COMMENT  CAN1
	COMMENT  3)	launch Primary Application by calling the function LaunchApplication with parameter
	COMMENT  MEMMAP_PRI_APP_ADDR
	COMMENT  when
	COMMENT  a)	Actual and calculated CRC for Boot software are equal.
	COMMENT  b)	Sd card is present in slot.
	COMMENT  c)	Maint_jump is other than TRUE.
	COMMENT  d)	Actual and calculated CRC for Primary Application software are equal.
	COMMENT  Equivalence Class 4,19,27,29,34
	COMMENT   </TD> 

	ELEMENT

		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR),	init = 1,     				ev = init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR), init =1,					ev = init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,						init = FALSE,				ev = init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),init=1,     				ev = init
			
		COMMENT INPUT/OUTPUT SECTION:
		
			--None
			
		COMMENT OUTPUT SECTION:

			--Return value of MainFunc
		    VAR ret_MainFunc,							init =1,					ev = 0
		    
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,					init = TMC,					ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,			init = 0,					ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,			init = 0,					ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,			init = 0,					ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.pvt,			init = 0,					ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.rci,			init = 1,					ev = 0      
			VAR PTU_s_tx_message.u8PaySize,				init = 1,					ev = DEC_ONE 
			VAR PTU_s_tx_message.u8PayLoad[0],			init = 0,					ev = NO_ERR_VAL 
			VAR PTU_s_tx_message.sID.BID.doc,			init = 0,					ev = PBIT_ERROR 
			
		-- Stub Calls :
		SIMUL
		    
			--Initialize hardware
			STUB HwInit()
		    	
		    --Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
		    STUB CrcResetDr()
		    STUB CrcResetDr()
		    
		    -- Get value of l_crc_calc[0]
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
		    	
		    --GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
		    	
		    --Enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
		    	
		    --Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
		    	
		    --Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
		    
		  	--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1
    		
		    --For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)1
			
			--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit() A825_XM_OVERFLOW
		    
		    -- Calls dummy function
			STUB dummyfunc()
			
			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
		    				
		END SIMUL
		    	
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
    END ELEMENT

END TEST -- TEST 3

TEST 4
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-023]
	COMMENT  The function 'MainFunc'does the following to transmit Flight CRC error message or
	COMMENT  no error message.
	COMMENT  1.Set the parameters  of A825 message as follows. 
	COMMENT  1.Set the parameters  of A825 message as follows. 
	COMMENT  - lcc of A825 message to NOC.
	COMMENT	 - sfid of BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT	 - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT	 - lcl of  BID of sID of A825 message to DEC_ONE.
	COMMENT	 - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT	 - rci of  BID of  sID to DEC_ZERO.
	COMMENT	 - u8PaySize of A825 message to DEC_ONE.
	COMMENT  - doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - sets u8PayLoad[0] of  A825 message  to error code and calls 'A825Xmit' with A825 
	COMMENT  message as parameter when
	COMMENT  Actual and calculated CRC for Maintenance Application software are not equal 
	COMMENT  when
	COMMENT  a)	Actual and calculated CRC for Boot software are equal.
	COMMENT  b)	Sd card is present in slot.
	COMMENT  c)	Maint_jump is other than TRUE.
 	COMMENT  Equivalence Class 4,16,27,29,35
	COMMENT   </TD> 

	ELEMENT

		COMMENT INPUT SECTION:
					    	
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 		init=1,     		ev=init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),		init=0,     		ev=init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR), 	init=0,     		ev = init
			
		COMMENT INPUT/OUTPUT SECTION:
		
			--None
			
		COMMENT OUTPUT SECTION:
					
			--Return value of MainFunc
			VAR ret_MainFunc,								init = 1,			ev = 0
			
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,						init = TMC,			ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,				init = 0,			ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,				init = 0,			ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.pvt,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.rci,				init = 1,			ev = 0
			VAR PTU_s_tx_message.u8PaySize,					init = 1,			ev = DEC_ONE 	
						
		-- Stub Calls :
		SIMUL
			
			-- Initialize hardware
			STUB HwInit()
				
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
			
			-- Get value of l_crc_calc[0]
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
				
			-- GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
				
			-- Enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
				
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
				
			-- Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
				
			-- For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)0
				
			--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR, MEMMAP_MAINT_APP_CRC_CNT)1
    		
    		--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit() A825_XM_OVERFLOW
			
			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)
			
			--Dummy function 
			STUB dummyfunc()
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
		END SIMUL
			
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	END ELEMENT
		
END TEST -- TEST 4

TEST 5
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-014]
	COMMENT  The function 'MainFunc' does the following
	COMMENT  1)Calls the function 'CanDeInit' to de-initialize the CAN
	COMMENT  peripheral with parameter CAN1
	COMMENT  2)Launchs Primary Application by calling 'LaunchApplication'
	COMMENT  with parameter MEMMAP_PRI_APP_ADDR when
	COMMENT  a) Actual and calculated CRC for Boot software are equal.
	COMMENT  b) Sd card is not present in slot.
	COMMENT  c) Actual and calculated CRC for Primary Application software are equal
	COMMENT  Equivalence Class 4,28,15,19,34
	COMMENT   </TD> 
			
	ELEMENT

		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 			init=1,     		ev = init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR), 		init=1,     		ev = init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR), 		init=0,     		ev = init
			
		COMMENT INPUT/OUTPUT SECTION:
				
			--None
			
		COMMENT OUTPUT  SECTION:
			
			--Return value of MainFunc
			VAR ret_MainFunc,									init =1,			ev = 0
			

		--Stub Calls :
		SIMUL
		
			-- Initialize hardware
			STUB HwInit()
			
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
			
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
			
			-- get value of l_crc_calc[0]
		    STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
			
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
			
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
						    				
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_SET
			
			--To For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1
			
			--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR, MEMMAP_MAINT_APP_CRC_CNT)1
    		
			--Calls the  dummy function
			STUB dummyfunc()
			
			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
						    				
		END SIMUL
						    	
			-- Calling the Unit Under Test :
			#ret_MainFunc = MainFunc();
			
	END ELEMENT
				
END TEST -- TEST 5
			
TEST 6
FAMILY nominal
	
	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-025]
	COMMENT  The function 'MainFunc' does the following to transmit Flight CRC error message
	COMMENT  1.Set the parameters  of A825 message as follows. 
	COMMENT  - lcc of A825 message to NOC.
	COMMENT  - sfid of BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT  - rsd of BID of sID of A825 message to DEC_ZERO.
	COMMENT  - lcl of BID of sID of A825 message to DEC_ONE.
	COMMENT  - pvt of BID of sID of A825 message to DEC_ONE.
	COMMENT  - rci of BID of  sID of A825 message to DEC_ZERO.
	COMMENT  - u8PaySize of A825 message to DEC_ONE.
	COMMENT  2.The function loops infinitely and do the following:
	COMMENT  - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - Set u8PayLoad[0] of  A825 message  to error code.
	COMMENT  - Calls the function 'A825Xmit' with A825 message as parameter.
	COMMENT  - Delays for DLY_500MS
	COMMENT  - Calls the function 'WdogKickWatchDog' when
	COMMENT  a)	Actual and calculated CRC for Boot software are equal.
	COMMENT  b)	Sd card is not present in slot.
	COMMENT  c)  Actual and calculated CRC for Primary Application software are not equal.
	COMMENT  Equivalence Class 4,20,28,35,36
	COMMENT   </TD> 
			
	ELEMENT

		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
		    VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 		init=1,     		ev = init
		    			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),		init=1,   			ev = init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR), 	init=0,     		ev = init
			

			
		COMMENT INPUT/OUTPUT SECTION:
						
			--None
	
		COMMENT OUTPUT SECTION:
	
			--Return value of MainFunc
			VAR ret_MainFunc,								init =1,			ev = 0

			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,						init = TMC,			ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,				init = 0,			ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,				init = 0,			ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.pvt,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.rci,				init = 1,			ev = 0      
			VAR PTU_s_tx_message.u8PaySize,					init = 1,			ev = DEC_ONE
			VAR PTU_s_tx_message.u8PayLoad[0],				init = 0,			ev = 6
			VAR PTU_s_tx_message.sID.BID.doc,				init = 0,			ev = PBIT_ERROR 
			
		-- Stub Calls :
		SIMUL
	
			--Initialize hardware
			STUB HwInit()
		
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
			
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
				
			-- get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
		
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
		
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
		
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_SET
			
			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR, MEMMAP_PRI_APP_CRC_CNT)0
			
			--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR, MEMMAP_MAINT_APP_CRC_CNT)1
    		
    		--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		END SIMUL
	
		 -- Calling the Unit Under Test :
		 #ret_MainFunc = MainFunc();
		 
	END ELEMENT
	
END TEST -- TEST 6					
			
TEST 7
FAMILY nominal
	
	COMMENT  Test Description
	COMMENT  <TD>
	COMMENT  [hducommbmain-MainFunc-CB-LLR-017]
	COMMENT  The function 'MainFunc' does nothing when 
	COMMENT  a) Actual and calculated CRC for Boot software are not equal  
	COMMENT  Equivalence Class 21
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-026]
	COMMENT  The function 'MainFunc' does the following to transmit Boot CRC error message
	COMMENT  1.Set the parameters  of A825 message as follows. 
	COMMENT  - lcc of A825 message to NOC.
	COMMENT  - sfid of BID of sID of A825 message to HOWELL_DAU_FID
	COMMENT  - rsd of  BID of sID to DEC_ZERO.
	COMMENT  - lcl of  BID of sID to DEC_ONE.
	COMMENT  - pvt of  BID of sID to DEC_ONE.
	COMMENT  - rci of  BID of  sID to DEC_ZERO.
	COMMENT  - u8PaySize to DEC_ONE.
	COMMENT  2.The function loops infinitely and do the following:
	COMMENT  - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - Set u8PayLoad[0] of  A825 message  to error code.
	COMMENT  - Calls the function 'A825Xmit' with A825 message as parameter.
	COMMENT  - Delays for DLY_500MS
	COMMENT  - Calls the function 'WdogKickWatchDog' when
	COMMENT  a) Actual and calculated CRC for Boot software are not equal
	COMMENT  Equivalence Class 4,35,36
	COMMENT   </TD> 
	
	ELEMENT
     
		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 			init=1,     	ev = init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),			init=0,   		ev = init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR), 		init=0,     	ev = init

		COMMENT INPUT/OUTPUT SECTION:
								
			--None
			
		COMMENT OUTPUT SECTION:
					
			--Return value of MainFunc
			VAR ret_MainFunc,									init =1,		ev = 0
					
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,							init = TMC,		ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,					init = 0,		ev = 42
			VAR PTU_s_tx_message.sID.BID.rsd,					init = 0,		ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,					init = 0,		ev = DEC_ONE              
			VAR PTU_s_tx_message.sID.BID.pvt,					init = 0,		ev = DEC_ONE                         
			VAR PTU_s_tx_message.sID.BID.rci,					init = 1,		ev = 0               
			VAR PTU_s_tx_message.u8PaySize,						init = 1,		ev = DEC_ONE 	

		-- Stub Calls :
		SIMUL
				
			--Initialize hardware
			STUB HwInit()
					
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()

			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
				
			-- get value of l_crc_calc[0]
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)0
					
			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR, MEMMAP_PRI_APP_CRC_CNT)0

			--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR, MEMMAP_MAINT_APP_CRC_CNT)0
    		
    		--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			
			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		END SIMUL
							    	
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	 END ELEMENT
	 
END TEST -- TEST 7					
			
TEST 8
FAMILY nominal
	
	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-016]
	COMMENT  The function 'MainFunc' loops from DEC_ZERO to REVNO_LEN_BOOT and does nothing 
	COMMENT  when the Revno_id_boot is Alphanumeric.
	COMMENT  MCDC covered  TTFFFFFFF,TFFFFFFFF,FXFFFFFFF
	COMMENT  Equivalence Class 22 
	COMMENT   </TD> 
				
    ELEMENT
	
	
		
		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 		init=1,     		ev=init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),	init=1,     		ev=init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),		init=1,   			ev=init
			
			-- Part Number (equal to CHAR0)
			VAR Revno_id_boot[0], 							init = '0', 		ev=init
	
			--Part Number (greater than CHAR0)
			VAR Revno_id_boot[1], 							init = '1',			ev=init
			
			--Part Number(less than CHAR0)
			VAR Revno_id_boot[5], 							init = '/', 		ev=init
			
			--Part Number(equal to CHAR9)
			VAR Revno_id_boot[8], 							init = '9',			ev=init
			
			--Part Number(greater than CHAR9)
			VAR Revno_id_boot[14],							init = '<', 		ev=init
			
			--Part Number(less than CHAR9)
			VAR Revno_id_boot[15],							init = '8',			ev=init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,							init=TRUE,			ev=init
	
		COMMENT INPUT/OUTPUT SECTION:
				
			--None
					
		COMMENT OUTPUT SECTION:
			
			--Return value of MainFunc
			VAR ret_MainFunc,							init =1,				ev = 0
	
		--Stub Calls :
		SIMUL
			
			---Hardware initialization
			STUB HwInit()
					
			--To  Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
			
			-- To get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
				
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
					
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
					
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
					
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
					
			--To For CRC calculations for maintainance Application
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1
			
			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0
			
			--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		END SIMUL
			
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
	END ELEMENT
	
END TEST -- TEST 8

TEST 9
FAMILY nominal
 
	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-016]
	COMMENT  The function 'MainFunc' loops from DEC_ZERO to REVNO_LEN_BOOT and does nothing 
	COMMENT  when the Revno_id_boot is Alphanumeric 
	COMMENT  MCDC covered  FFTTFFFFF,FFTFFFFFF,FFFXFFFFF
	COMMENT  Equivalence Class 22
	COMMENT   </TD> 
				
	ELEMENT
				
		COMMENT INPUT SECTION:
		
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 	init=1,     			ev=init		

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
		 	VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),init=1,     			ev=init

			-- Part Number(equal to CHARUA)
			VAR Revno_id_boot[0], 						init = 'A', 			ev=init

			--Part Number (greater than CHARUA)
			VAR Revno_id_boot[1], 						init = 'B',				ev=init

			-- Part Number(less than CHARUA)
			VAR Revno_id_boot[5],						init = '@',				ev=init

			-- Part Number(equal to CHARUZ)1576
			
			VAR Revno_id_boot[8],						init = 'Z',				ev=init

			-- Part Number(greater than CHARUZ)
			VAR Revno_id_boot[14],						init = '[',				ev=init

			-- Part Number( less than CHARUZ)
			VAR Revno_id_boot[15],						init = 'Y',				ev=init

			--Arinc 825 message DOC id information
			VAR Maint_jump,						init=TRUE,				ev=init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),	init=1,   				ev = init
			
		COMMENT INPUT/OUTPUT SECTION:

			--None
					
		COMMENT OUTPUT  SECTION:
		
			--Return value of MainFunc
			VAR ret_MainFunc,							init =1,				ev = 0

		-- Stub Calls :
		SIMUL
		
			-- Initialize hardware
			STUB HwInit()
			
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
		
			-- get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
			
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
			
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
			
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
			
		     -- Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
			
			--To For CRC calculations for maintainance Application
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1

			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

			--reloads the watchdog timer 
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit () A825_XM_OVERFLOW
			STUB  A825Xmit () A825_XM_OVERFLOW
			STUB  A825Xmit () A825_XM_OVERFLOW
			STUB  A825Xmit () A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		END SIMUL
		
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();

	END ELEMENT
	
END TEST -- TEST 9	
			
TEST 10
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-016]
	COMMENT  The function 'MainFunc' loops from DEC_ZERO to REVNO_LEN_BOOT and does nothing 
	COMMENT  when the Revno_id_boot is Alphanumeric 
	COMMENT  MCDC covered FFFFTTFFF,FFFFTFFFF,FFFFFXFFF
	COMMENT  Equivalence Class 22
	COMMENT   </TD> 
		
	ELEMENT
		
		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 	 init = 1,     			ev=init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
		    VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),init = 1,     			ev=init

		    -- Part Number( equal to CHARLA)
			VAR Revno_id_boot[0],						 init = 'a',			ev=init

			-- Part Number( greater than CHARLA)
		    VAR Revno_id_boot[1],						 init = 'b',			ev=init

		    -- Part Number( less than CHARLA)
		    VAR Revno_id_boot[5],						 init = ']',			ev=init

		    -- Part Number( equal to CHARLZ)
			VAR Revno_id_boot[8],						 init = 'z',			ev=init

			-- Part Number( less than CHARLZ)
			VAR Revno_id_boot[14],						 init = '{',			ev=init

		    -- Part Number(  greater than CHARLZ)
			VAR Revno_id_boot[15],						 init = 'y',			ev=init

			--Arinc 825 message DOC id information
			VAR Maint_jump,						 init=TRUE,				ev=init

		    --Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR), init = 1,   			ev=init
			
		COMMENT INPUT/OUTPUT SECTION:
								
			--None
				
		COMMENT OUTPUT SECTION:
				
			--Return value of MainFunc
			VAR ret_MainFunc,							 init = 1,				ev = 0
					
		--Stub Calls :
		SIMUL
			
			---Initialize hardware
			STUB HwInit()
			
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr ()
			STUB CrcResetDr ()
			STUB CrcResetDr ()
					
			-- To get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
						
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
						
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
						
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
						
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
					    
			--To For CRC calculations for maintainance Application
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1

			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

			--reloads the watchdog timer 
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()

		END SIMUL
							
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();

	END ELEMENT
	
END TEST -- TEST 10				        
						
TEST 11				            
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  
	COMMENT  [hducommbmain-MainFunc-CB-LLR-016]
	COMMENT  The function 'MainFunc' loops from DEC_ZERO to REVNO_LEN_BOOT and does nothing when
	COMMENT  1)Revno_id_boot[0] is HYPHEN 
	COMMENT  2)Revno_id_boot[1] is other than HYPHEN, POINT and SPACE .
	COMMENT  3)Revno_id_boot[5] is POINT 
	COMMENT  4)Revno_id_boot[5] is SPACE.
	COMMENT  MCDC covered  FFFFFFTTT,FFFFFFTFT,FFFFFFTTF,FFFFFFFTT,FFFFFFFTF,FFFFFFFFT,FFFFFFFFF
	COMMENT  Equivalence Class 23,24,25
	COMMENT   </TD> 
				
    ELEMENT
		
		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 		init=1,     		ev=init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),	init=1,     		ev=init
			
			-- Part Number( equal to HYPEN)
			VAR Revno_id_boot[0], 							init = '-',			ev=init
			
			-- Part Number(not equal to HYPEN)
			VAR Revno_id_boot[1],							init = '^',			ev=init
			
			-- Part Number(equal to  POINT)
			VAR Revno_id_boot[5],							init = '.',			ev=init
			
			-- Part Number( equal to SPACE)
			VAR Revno_id_boot[8],							init = ' '  ,		ev=init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,							init=TRUE,			ev=init
		
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),		init=1,   			ev=init
			
		COMMENT INPUT/OUTPUT SECTION:
								
			--None
							
		COMMENT OUTPUT  SECTION:
				
			--Return value of MainFunc
			VAR ret_MainFunc,								init =1,			ev = 0

		-- Stub Calls :
		SIMUL
		
			--Initialize hardware
			STUB HwInit()
		
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr ()
			STUB CrcResetDr ()
			STUB CrcResetDr ()
		
			-- get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
		
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
		
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
		
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
		
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
		
			--To For CRC calculations for maintainance Application
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1

			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

			--reloads the watchdog timer 
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()
			STUB WdogKickWatchDog()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			STUB  A825Xmit() A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		 END SIMUL
							
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	END ELEMENT
	
END TEST -- TEST 11
			
						
TEST 12				            
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-016]
	COMMENT  The function 'MainFunc' loops from DEC_ZERO to REVNO_LEN_BOOT and does nothing 
	COMMENT  when Revno_id_boot[0],Revno_id_boot[4],Revno_id_boot[1..3],Revno_id_boot[6..8],
	COMMENT  Revno_id_boot[11],Revno_id_boot[13..14] is Alphanumeric,Revno_id_boot[5] is HYPEN,
	COMMENT  Revno_id_boot[9] is SPACE, Revno_id_boot[12] is POINT 
	COMMENT  MCDC covered  TTTTFXTTT
	COMMENT  Equivalence Class 22,23,24,25,26
	COMMENT   </TD> 
				
    ELEMENT
		
		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 	init=1,     			ev = init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR),init=1,     			ev = init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),	init=1,   				ev = init

			-- Part Number([0] equal to H)
			VAR Revno_id_boot[0],						init = 'H'  ,			ev= init

			-- Part Number([1] equal to 1)
			VAR Revno_id_boot[1],						init = '1'  ,			ev= init

			-- Part Number([2] equal to 0)
			VAR Revno_id_boot[2],						init = '0'  ,			ev= init

			-- Part Number([3] equal to 8)
			VAR Revno_id_boot[3],						init = '8'  ,			ev= init

			-- Part Number([4] equal to E)
			VAR Revno_id_boot[4],						init = 'E'  ,			ev= init

			-- Part Number([5] equal to -)
			VAR Revno_id_boot[5],						init = '-'  ,			ev= init

			-- Part Number([6] equal to 1)
			VAR Revno_id_boot[6],						init = '1'  ,			ev= init

			-- Part Number([7] equal to 3)
			VAR Revno_id_boot[7],						init = '3'  ,			ev= init

			-- Part Number([8] equal to 6)
			VAR Revno_id_boot[8],						init = '6'  ,			ev= init

			-- Part Number([9] equal to SPACE)
			VAR Revno_id_boot[9],						init = ' '  ,			ev= init

			-- Part Number([10] equal to -)
			VAR Revno_id_boot[10],						init = '-'  ,			ev= init

			-- Part Number([11] equal to 1)
			VAR Revno_id_boot[11],						init = '1'  ,			ev= init

			-- Part Number([12] equal to .)
			VAR Revno_id_boot[12],						init = '.'  ,			ev= init

			-- Part Number([13] equal to 0)
			VAR Revno_id_boot[13],						init = '0'  ,			ev= init

			-- Part Number([14] equal to 6)
			VAR Revno_id_boot[14],						init = '6'  ,			ev= init

			--Arinc 825 message DOC id information
			VAR Maint_jump,						init=TRUE,				ev=init

		COMMENT INPUT/OUTPUT SECTION:
								
			--None
							
		COMMENT OUTPUT  SECTION:
				
			--Return value of MainFunc
			VAR ret_MainFunc,							init =1,				ev = 0
					
		-- Stub Calls :
		SIMUL
		
			-- Initialize hardware
			STUB HwInit()
		
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
		
			-- get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
		
			--GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
		
			-- enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
		
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
		
			--Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
		
			--To For CRC calculations for maintainance Application
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1

			--For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

			--reloads the watchdog timer 
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()
			STUB WdogKickWatchDog ()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			STUB A825Xmit () A825_XM_OVERFLOW
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()

		 END SIMUL
							
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	END ELEMENT
	
END TEST -- TEST 12			

TEST 13
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-024]
	COMMENT  The function 'MainFunc' does  the following to transmit Flight CRC error message
	COMMENT  1.Set the parameters of A825 message as follows. 
	COMMENT  - lcc of A825 message to NOC.
	COMMENT  - sfid of  BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT  - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT  - lcl of  BID of sID of A825 message  to DEC_ONE.
	COMMENT  - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT  - rci of  BID of  sID of A825 message  to DEC_ZERO.
	COMMENT  - u8PaySize of A825 message to DEC_ONE
	COMMENT  2.The function loops infinitely and do the following:
	COMMENT  - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT  - Set u8PayLoad[0] of  A825 message  to error code
	COMMENT  - Calls the function 'A825Xmit' with A825 message as parameter.
	COMMENT  - Delay for DLY_500MS
	COMMENT  - Calls the function 'WdogKickWatchDog'
	COMMENT  when
	COMMENT  a)	Actual and calculated CRC for Boot software are equal.
	COMMENT  b)	Sd card is present in slot.
	COMMENT  c)	Maint_jump is other than TRUE.
	COMMENT  d)	Actual and calculated CRC for Primary Application software are not equal.
	COMMENT  Equivalence Class 4,20,27,29,35,36
	COMMENT   </TD> 

	ELEMENT

		COMMENT INPUT SECTION:
					    	
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 			init=1,     		ev = init
						
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_PRI_APP_CRC_ADDR),			init=0,     		ev = init
			
			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_MAINT_APP_CRC_ADDR), 		init=1,     		ev = init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,								init=FALSE,			ev = init
			
		COMMENT INPUT/OUTPUT SECTION:
		
			--None
			
		COMMENT OUTPUT SECTION:
					
			--Return value of MainFunc
			VAR ret_MainFunc,									init =1,			ev = 0
			
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,							init = TMC,			ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,					init = 0,			ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,					init = 0,			ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,					init = 0,			ev = DEC_ONE              
			VAR PTU_s_tx_message.sID.BID.pvt,					init = 0,			ev = DEC_ONE                         
			VAR PTU_s_tx_message.sID.BID.rci,					init = 1,			ev = 0               
			VAR PTU_s_tx_message.u8PaySize,						init = 1,			ev = DEC_ONE 
			
		-- Stub Calls :
		SIMUL
			
			-- Initialize hardware
			STUB HwInit()
				
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr ()
			STUB CrcResetDr ()
			STUB CrcResetDr ()
			
			-- Get value of l_crc_calc[0]
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
				
			-- GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
				
			-- Enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
				
			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
				
			-- Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
				
			-- For CRC calculations for primaryApplication
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)1
				
			--Computes the 32-bit CRC of a given buffer of data word 
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR, MEMMAP_MAINT_APP_CRC_CNT)1
    		
    		--builds a CAN message from the user supplied ARINC 825 message
			STUB  A825Xmit() A825_XM_OVERFLOW
			
			--reloads the watchdog timer 
			STUB WdogKickWatchDog 1..4=> ()

			--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit 1..5=>() A825_XM_OK
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcResetDr()
			
		END SIMUL
			
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	END ELEMENT
		
END TEST -- TEST 13	

TEST 14
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT 
	COMMENT [hducommbmain-MainFunc-CB-LLR-027]
	COMMENT The function shall Resets the CRC Data register by calling the function CrcResetDr and computes the 32-bit CRC for
	COMMENT Software Loader application by calling the function CrcCalcBlockCrc with parameters MEMMAP_SWL_APP_ADDR and 
	COMMENT MEMMAP_SWL_APP_CRC_CNT
	COMMENT Equivalence class :None
	COMMENT  [hducommbmain-MainFunc-CB-LLR-030]
	COMMENT The function shall do the following to transmit Software Loader CRC error message
	COMMENT 1.Set the parameters of A825 message as follows. 
	COMMENT - lcc of A825 message to NOC.
	COMMENT - sfid of  BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT - lcl of  BID of sID of A825 message to DEC_ONE.
	COMMENT - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT - rci of  BID of sID of A825 message to DEC_ZERO.
	COMMENT - u8PaySize of A825 message to DEC_ONE.
	COMMENT 2.The function shall loop infinitely and do the following:
	COMMENT - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT - Set u8PayLoad[0] of  A825 message  to error code.
	COMMENT - Call the function A825Xmit with A825 message as parameter.
	COMMENT - Delays for DLY_500MS
	COMMENT - Decrement counter by DEC_ONE till counter is greater than DEC_ZERO.
	COMMENT - Call the function WdogKickWatchDog
	COMMENT when all of the below conditions are satisfied
	COMMENT a)	Actual and calculated CRC for Boot software are equal.
	COMMENT b)	Sd card is present in slot.
	COMMENT c)	Maint_jump is FALSE
	COMMENT d)  Swl_jump is TRUE
	COMMENT e)	Actual and calculated CRC for Software Loader Application  are not equal.
	COMMENT Equivalence class:30,37
	COMMENT   </TD> 

	ELEMENT

		COMMENT INPUT SECTION:
			
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR),	init = 1,     				ev = init
						
			--Reset CRC Data register MEMMAP_SWL_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_SWL_APP_CRC_ADDR), init =1,					ev = init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,						init = FALSE,				ev = init
			
			VAR Swl_jump,						init = TRUE,				ev = init 
			
	
			
		COMMENT INPUT/OUTPUT SECTION:
		
			--None
			
		COMMENT OUTPUT SECTION:

			--Return value of MainFunc
		    VAR ret_MainFunc,							init =1,					ev = 0
		    

			
		-- Stub Calls :
		SIMUL
		    
			--Initialize hardware
			STUB HwInit()
		    	
		    --Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
		    STUB CrcResetDr()
		    STUB CrcResetDr()
		    
		    -- Get value of l_crc_calc[0]
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
			
			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)
			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)0
		    	
		    --GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
		    	
		    --Enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
		    	
		    --Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
		    	
		    --Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
		    			
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_SWL_APP_CRC_CNT)1
   
		    
		    -- Calls dummy function
			STUB dummyfunc()
			
			--Deinitializes the CAN peripheral registers to their default reset values

			


    		STUB CrcResetDr()
		    				
		END SIMUL
		    	
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
    END ELEMENT

END TEST -- TEST 14


TEST 15
FAMILY nominal


	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT [hducommbmain-MainFunc-CB-LLR-027]
	COMMENT The function shall Resets the CRC Data register by calling the function CrcResetDr and computes the 32-bit CRC for
	COMMENT Software Loader application by calling the function CrcCalcBlockCrc with parameters MEMMAP_SWL_APP_ADDR and 
	COMMENT MEMMAP_SWL_APP_CRC_CNT
	COMMENT Equivalence class :None
	COMMENT  [hducommbmain-MainFunc-CB-LLR-030]
	COMMENT The function shall do the following to transmit Software Loader CRC error message
	COMMENT 1.Set the parameters of A825 message as follows. 
	COMMENT - lcc of A825 message to NOC.
	COMMENT - sfid of  BID of sID of A825 message to HOWELL_DAU_FID.
	COMMENT - rsd of  BID of sID of A825 message to DEC_ZERO.
	COMMENT - lcl of  BID of sID of A825 message to DEC_ONE.
	COMMENT - pvt of  BID of sID of A825 message to DEC_ONE.
	COMMENT - rci of  BID of sID of A825 message to DEC_ZERO.
	COMMENT - u8PaySize of A825 message to DEC_ONE.
	COMMENT 2.The function shall loop infinitely and do the following:
	COMMENT - Set doc of BID of sID of  A825 message  to PBIT_ERROR.
	COMMENT - Set u8PayLoad[0] of  A825 message  to error code.
	COMMENT - Call the function A825Xmit with A825 message as parameter.
	COMMENT - Delays for DLY_500MS
	COMMENT - Decrement counter by DEC_ONE till counter is greater than DEC_ZERO.
	COMMENT - Call the function WdogKickWatchDog
	COMMENT when all of the below conditions are satisfied
	COMMENT a)	Actual and calculated CRC for Boot software are equal.
	COMMENT b)	Sd card is present in slot.
	COMMENT c)	Maint_jump is FALSE
	COMMENT d)  Swl_jump is TRUE
	COMMENT e)	Actual and calculated CRC for Software Loader Application  are not equal.
	COMMENT Equivalence class:30,37
	COMMENT   </TD> 

	ELEMENT

		COMMENT INPUT SECTION:
					    	
			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *((T_UINT32 *) MEMMAP_BOOT_CRC_ADDR), 		init=1,     		ev=init
						
			--Reset CRC Data register MEMMAP_SWL_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_SWL_APP_CRC_ADDR), init =1,					ev = init
			
			--Arinc 825 message DOC id information
			VAR Maint_jump,						init = FALSE,				ev = init
			
			VAR Swl_jump,						init = TRUE,				ev = init 

			
		COMMENT INPUT/OUTPUT SECTION:
		
			--None
			
		COMMENT OUTPUT SECTION:
					
			--Return value of MainFunc
			VAR ret_MainFunc,								init = 1,			ev = 0
			
			-- parameters  of A825 message 
			VAR PTU_s_tx_message.lcc,						init = TMC,			ev = NOC
			VAR PTU_s_tx_message.sID.BID.sfid,				init = 0,			ev = HOWELL_DAU_FID
			VAR PTU_s_tx_message.sID.BID.rsd,				init = 0,			ev = DEC_ZERO
			VAR PTU_s_tx_message.sID.BID.lcl,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.pvt,				init = 0,			ev = DEC_ONE
			VAR PTU_s_tx_message.sID.BID.rci,				init = 1,			ev = 0
			VAR PTU_s_tx_message.u8PaySize,					init = 1,			ev = DEC_ONE 
			VAR PTU_s_tx_message.sID.BID.doc,				init = 0,			ev = PBIT_ERROR 
			
						
		-- Stub Calls :
		SIMUL
			
			-- Initialize hardware
			STUB HwInit()
				
			--Perform CRC calculations for Bootloader and Resets the CRC Data Register
			STUB CrcResetDr()
			STUB CrcResetDr()
			STUB CrcResetDr()
			
			-- Get value of l_crc_calc[0]
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)1
				
			-- GPIO configuration in input for uSD_Detect signal
			STUB GpioInit(GPIOA)
				
			-- Enable  GPIOA clock 
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)
				
				
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR,MEMMAP_PRI_APP_CRC_CNT)0

			--Check SD card detect pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET
			
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0

			STUB CrcResetDr()

				
			-- Performs initialization necessary for ARINC 825 communication
			STUB A825Init()
				
    		STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_SWL_APP_CRC_CNT)0

    		
    		--builds a CAN message from the user supplied ARINC 825 message
			STUB A825Xmit 1..4=>() A825_XM_OVERFLOW
			
			STUB WdogKickWatchDog 1..4=>()
			
			
			
		
			
		END SIMUL
			
		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();
		
	END ELEMENT
		
END TEST -- TEST 15


TEST 16
FAMILY nominal

	COMMENT  Test Description
	COMMENT  <TD> 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-001]
	COMMENT  The function 'MainFunc' initializes Hardware by calling 'HwInit' function and
	COMMENT  initializes the A825 Communication by calling 'A825Init'.
	COMMENT  Equivalence Class 1,10
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-002]
	COMMENT  The function 'MainFunc'resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr'and computes the 32-bit CRC for Boot Software by calling the function
	COMMENT  'CrcCalcBlockCrc'with parameters MEMMAP_BOOT_ADDR and MEMMAP_BOOT_CRC_CNT.
	COMMENT  Equivalence Class 2,3
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-003]
	COMMENT  The function 'MainFunc'sets CRC for Boot Application with actual CRC 
	COMMENT  ‘MEMMAP_BOOT_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-004]
	COMMENT  This function 'MainFunc' resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr'and computes the 32-bit CRC for Primary Application Software by calling 
	COMMENT  the function 'CrcCalcBlockCrc' with parameters MEMMAP_PRI_APP_ADDR and MEMMAP_PRI_APP_CRC_CNT.
	COMMENT  Equivalence Class 2,3
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-018]
	COMMENT  The function 'MainFunc' sets CRC for Primary Application with actual CRC 
	COMMENT  ‘MEMMAP_PRI_APP_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-019]
	COMMENT  The function 'MainFunc' Resets the CRC Data register by calling the function 
	COMMENT  'CrcResetDr 'and computes
	COMMENT  the 32-bit CRC for Maintenance Application Software by calling the function 
	COMMENT  CrcCalcBlockCrc with parameters
	COMMENT  MEMMAP_MAINT_APP_ADDR and MEMMAP_MAINT_APP_CRC_CNT
	COMMENT  Equivalence Class 2,3
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-020]
	COMMENT  The function 'MainFunc'sets CRC for Maintenance Application with actual CRC 
	COMMENT  ‘MEMMAP_MAINT_APP_CRC_ADDR’
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-021]
	COMMENT  The function 'MainFunc' does the following 
	COMMENT  1.	Does nothing when Actual and calculated CRC for Boot software are equal.
	COMMENT  2.	Does nothing when Actual and calculated CRC for primary application software are
	COMMENT     equal.
	COMMENT  3.	Does nothing when Actual and calculated CRC for Maintainance application software 
	COMMENT     are equal.
	COMMENT  Equivalence Class 4,14,19
	COMMENT 
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-001]
	COMMENT  This function 'SdCardInserted' enables GPIOA clock by calling 'RccAhb1PeriphClockCmd'
	COMMENT  with parameters RCC_AHB1PERIPH_GPIOA and ENABLE.
	COMMENT  Equivalence Class 6
	COMMENT
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-002]
	COMMENT  The function 'SdCardInserted' configures pin 15 of GPIO port A by calling 'GpioInit'
	COMMENT  and initialize the members
	COMMENT  of gpio init structure  with the members  initialized as follows  
	COMMENT  a) set GPIO pin(GPIO_Pin) to HW_GPIOA_SDCARD,
	COMMENT  b) set GPIO port Mode register(GPIO_Mode) to GPIO_MODE_IN, 
	COMMENT  c) set GPIO port Pull-up/Pull-down register(GPIO_PuPd) to GPIO_PUPD_UP and
	COMMENT  d) set GPIO speed(GPIO_Speed) to GPIO_SPEED_100MHZ.
	COMMENT  Equivalence Class 7
	COMMENT
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-003]
	COMMENT  The function 'SdCardInserted' does nothing when the function 'GpioReadInputDataBit' 
	COMMENT  with parameters 
	COMMENT  GPIOA and GPIO_PIN_15 return other than BIT_SET'
	COMMENT  Equivalence Class 9
	COMMENT  
	COMMENT  [hducommbmain-SdCardInserted-CB-LLR-004]
	COMMENT  The function 'SdCardInserted' returns the status of the SD card.
	COMMENT  Equivalence Class 27
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-017]
	COMMENT  The function does the following:
	COMMENT  a)  set the loop counter to product of DLY_500MS and DEC_FOUR
	COMMENT  b) loops for 0 time when Maint_jump is TRUE .
	COMMENT  when 
	COMMENT  a) Actual and calculated CRC for Boot software are equal
	COMMENT  b) Sd card is present in slot
	COMMENT  MCDC Covered FX
	COMMENT  Equivalence Class 4,27,30
	COMMENT 
	COMMENT  [hducommbmain-MainFunc-CB-LLR-008]
	COMMENT  The function 'MainFunc'does the following 
	COMMENT  1)	Calls 'CanDeInit' to Deinitializes the CAN peripheral registers to their default reset valueswith parameter CAN1
	COMMENT	 2)	launch Maintenance Application by calling 'LaunchApplication' with parameter
	COMMENT  MEMMAP_MAINT_APP_ADDR
	COMMENT	 when
	COMMENT	 a)	Actual and calculated CRC for Boot software are equal.
	COMMENT	 b)	Sd card is present in slot.
	COMMENT	 c)	Maint_jump is TRUE
	COMMENT  d)Swl_jump is is TRUE and MCDC covered is FFX
	COMMENT	 e)	Actual and calculated CRC for Maintenance Application software are equal.
	COMMENT  Equivalence Class 4,14,15,27,30,37
	COMMENT  
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-001]
	COMMENT  The function 'LaunchApplication' jumps to Secondary Application from passed 
	COMMENT  jump_address value
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-002]
	COMMENT  The function 'LaunchApplication' stores jump_address value in main stack pointer by
	COMMENT  calling 'SetMsp' 
	COMMENT  with parameter jump_address and jumps to the Application.
	COMMENT  Equivalence Class 17
	COMMENT
	COMMENT  [hducommbmain-LaunchApplication-CB-LLR-003]
	COMMENT  The function 'LaunchApplication' returns DEC_ZERO.
	COMMENT  Equivalence Class None
	COMMENT
	COMMENT  [hducommbmain-MainFunc-CB-LLR-015]
	COMMENT  The function 'MainFunc'  returns DEC_ZERO
	COMMENT  Equivalence Class None
	COMMENT   </TD>

	ELEMENT

		COMMENT INPUT SECTION:

			--Reset CRC Data register MEMMAP_BOOT_CRC_ADDR
			VAR *( MEMMAP_BOOT_CRC_ADDR),				init=0,						ev=init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR*(MEMMAP_MAINT_APP_CRC_ADDR),			init=0,						ev=init

			--Reset CRC Data register MEMMAP_MAINT_APP_CRC_ADDR
			VAR *(MEMMAP_PRI_APP_CRC_ADDR), 			init=0,     				ev=init
			
			--Reset CRC Data register MEMMAP_SWL_APP_CRC_ADDR
			VAR *((T_UINT32 *)MEMMAP_SWL_APP_CRC_ADDR), 			init=0,     				ev=init
																				
			VAR Maint_jump,						init=TRUE,					ev=init
			
			VAR Swl_jump,						init=TRUE,					ev=init

			


		COMMENT INPUT/OUTPUT SECTION:

			--None

		COMMENT OUTPUT SECTION:

			--Return value of MainFunc
			VAR ret_MainFunc,							init =1,					ev = 0

			--Specifies the GPIO pins to be configured
			VAR PTU_gpio_init_structure.GPIO_Pin,		init = 0,					ev = HW_GPIOA_SDCARD

			--Specifies the operating mode for the selected pins	
			VAR PTU_gpio_init_structure.GPIO_Mode,		init = GPIO_MODE_OUT,		ev = GPIO_MODE_IN

			--Specifies the operating Pull-up/Pull down for the selected pins	
			VAR PTU_gpio_init_structure.GPIO_PuPd,		init = GPIO_PUPD_DOWN,		ev = GPIO_PUPD_UP

			--Specifies the speed for the selected pins
			VAR PTU_gpio_init_structure.GPIO_Speed,		init = GPIO_SPEED_2MHZ,		ev = GPIO_SPEED_100MHZ

		-- Stub Calls :
		SIMUL

			--Hardware initialization 
			STUB HwInit()

			-- Resets the CRC Data Register
			STUB CrcResetDr()

			--Computes the 32-bit CRC of a given buffer of data word  
			STUB  CrcCalcBlockCrc((T_UINT32 *) MEMMAP_BOOT_ADDR,MEMMAP_BOOT_CRC_CNT)0

			--Initializes the gpio peripheral 
			STUB GpioInit(GPIOA)

			--Enables or disables the AHB1 peripheral clock
			STUB RccAhb1PeriphClockCmd(RCC_AHB1PERIPH_GPIOA , ENABLE)

			--Reads the specified input port pin
			STUB GpioReadInputDataBit(GPIOA, GPIO_PIN_15) BIT_RESET

			--Performs initialization for ARINC 825 communication
			STUB A825Init()

			-- Resets the CRC Data Register
			STUB CrcResetDr () 

			-- Resets the CRC Data Register
			STUB CrcResetDr ()

			-- Resets the CRC Data Register
			STUB CrcResetDr ()

			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_PRI_APP_ADDR, MEMMAP_PRI_APP_CRC_CNT)0

			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_MAINT_APP_ADDR,MEMMAP_MAINT_APP_CRC_CNT)0
			
			--Computes the 32-bit CRC of a given buffer of data word 
			STUB CrcCalcBlockCrc((T_UINT32 *) MEMMAP_SWL_APP_ADDR,MEMMAP_SWL_APP_CRC_CNT)0

			--calls dummy function
			STUB  dummyfunc()

			--Deinitializes the CAN peripheral registers to their default reset values
			STUB CanDeInit(CAN1)

		END SIMUL

		-- Calling the Unit Under Test :
		#ret_MainFunc = MainFunc();

	END ELEMENT

END TEST -- TEST 16



END SERVICE -- MainFunc



